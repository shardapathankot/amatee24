!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=85)}([function(e,t,r){var n=r(16);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},,function(e,t){function r(t){return e.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){var r=/^(?:submit|button|image|reset|file)$/i,n=/^(?:input|select|textarea|keygen)/i,a=/(\[[^\[\]]*\])/g;function o(e,t,r){if(t.match(a))!function e(t,r,n){if(0===r.length)return n;var a=r.shift(),o=a.match(/^\[(.+?)\]$/);if("[]"===a)return t=t||[],Array.isArray(t)?t.push(e(null,r,n)):(t._values=t._values||[],t._values.push(e(null,r,n))),t;if(o){var i=o[1],c=+i;isNaN(c)?(t=t||{})[i]=e(t[i],r,n):(t=t||[])[c]=e(t[c],r,n)}else t[a]=e(t[a],r,n);return t}(e,function(e){var t=[],r=new RegExp(a),n=/^([^\[\]]*)/.exec(e);for(n[1]&&t.push(n[1]);null!==(n=r.exec(e));)t.push(n[1]);return t}(t),r);else{var n=e[t];n?(Array.isArray(n)||(e[t]=[n]),e[t].push(r)):e[t]=r}return e}function i(e,t,r){return r=r.replace(/(\r)?\n/g,"\r\n"),r=(r=encodeURIComponent(r)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+r}e.exports=function(e,t){"object"!=typeof t?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);for(var a=t.hash?{}:"",c=t.serializer||(t.hash?o:i),u=e&&e.elements?e.elements:[],s=Object.create(null),l=0;l<u.length;++l){var p=u[l];if((t.disabled||!p.disabled)&&p.name&&n.test(p.nodeName)&&!r.test(p.type)){var m=p.name,d=p.value;if("checkbox"!==p.type&&"radio"!==p.type||p.checked||(d=void 0),t.empty){if("checkbox"!==p.type||p.checked||(d=""),"radio"===p.type&&(s[p.name]||p.checked?p.checked&&(s[p.name]=!0):s[p.name]=!1),null==d&&"radio"==p.type)continue}else if(!d)continue;if("select-multiple"!==p.type)a=c(a,m,d);else{d=[];for(var y=p.options,f=!1,g=0;g<y.length;++g){var v=y[g],h=t.empty&&!v.value,b=v.value||h;v.selected&&b&&(f=!0,a=t.hash&&"[]"!==m.slice(m.length-2)?c(a,m+"[]",v.value):c(a,m,v.value))}!f&&t.empty&&(a=c(a,m,""))}}}if(t.empty)for(var m in s)s[m]||(a=c(a,m,""));return a}},,,function(e,t){e.exports=jQuery},,function(e,t,r){var n=r(28),a=r(29),o=r(22),i=r(30);e.exports=function(e){return n(e)||a(e)||o(e)||i()},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){"use strict";function n(e,t){var r=t.settings,n=r.taxRates,a=r.taxStatus,o=t.state.price,i=o.unit_amount,c=o.currency,u=o.can_recur,s=o.recurring;return e.update({currency:c,taxRates:n,taxStatus:a}),e.addLineItem({id:"setup-fee",title:"Initial Setup Fee",amount:0,quantity:1,subscription:!1}),e.addLineItem({id:"plan-setup-fee",title:"Plan Setup Fee",amount:0,quantity:1,subscription:!1}),e.addLineItem({id:"base",price:o,title:s&&!1===u?"Subscription":"One Time",amount:i,quantity:1,subscription:!(!s||!1!==u)&&{isTrial:!!s.trial_period_days,interval:s.interval,intervalCount:s.interval_count}}),e}function a(e){return Math.abs(accounting.unformat(e,this.i18n.decimalSeparator))}function o(e,t,r,n){var a=t||!1,o=r||this.i18n.currencySymbol,i=n||!1,c="%s%v";if(a)switch(this.i18n.currencyPosition){case"left_space":c="%s %v";break;case"right":c="%v%s";break;case"right_space":c="%v %s"}var u={symbol:a?o:"",decimal:this.i18n.decimalSeparator,thousand:this.i18n.thousandSeparator,precision:i?0:this.i18n.decimalPlaces,format:c};return accounting.formatMoney(e,u)}function i(e){return accounting.toFixed(e/100,2)}function c(e){return Number(accounting.toFixed(100*e,0))}r.d(t,"l",(function(){return n})),r.d(t,"m",(function(){return a})),r.d(t,"e",(function(){return o})),r.d(t,"c",(function(){return i})),r.d(t,"b",(function(){return c})),r.d(t,"h",(function(){return m})),r.d(t,"f",(function(){return d})),r.d(t,"j",(function(){return y})),r.d(t,"i",(function(){return f})),r.d(t,"g",(function(){return g})),r.d(t,"a",(function(){return _})),r.d(t,"k",(function(){return x})),r.d(t,"d",(function(){return S}));var u=r(0),s=r.n(u);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e){if(!e.appearance){var t,r;document.createElement("style").id="simpay-stripe-element-styles",t=document.querySelector('.simpay-checkout-form input[type="text"]'),r=document.querySelector(".simpay-checkout-form label"),t||(t=document.querySelector('body [role="main"] input:not([type="hidden"])'),r=document.querySelector('body [role="main"] label'));var n=window.getComputedStyle(t),a=window.getComputedStyle(r),o={variables:{fontSizeBase:a.getPropertyValue("font-size"),fontFamily:a.getPropertyValue("font-family"),borderRadius:n.getPropertyValue("border-radius")},rules:{".Tab":{boxShadow:n.getPropertyValue("box-shadow"),border:n.getPropertyValue("border"),borderRadius:n.getPropertyValue("border-radius"),background:n.getPropertyValue("background")},".Input":{color:n.getPropertyValue("color"),fontSize:n.getPropertyValue("font-size"),fontWeight:n.getPropertyValue("font-weight"),lineHeight:n.getPropertyValue("line-height"),padding:n.getPropertyValue("padding"),boxShadow:n.getPropertyValue("box-shadow"),border:n.getPropertyValue("border"),borderRadius:n.getPropertyValue("border-radius"),background:n.getPropertyValue("background")}}},i=document.activeElement;t.focus();var c=window.getComputedStyle(t);return i.focus(),p(p({},e),{},{loader:"auto",appearance:{theme:"stripe",variables:p({},o.variables),rules:p(p({},o.rules),{},{".Tab:focus":{boxShadow:c.getPropertyValue("box-shadow"),border:c.getPropertyValue("border"),borderRadius:c.getPropertyValue("border-radius"),background:c.getPropertyValue("background"),outline:c.getPropertyValue("outline"),outlineOffset:c.getPropertyValue("outline-offset")},".Tab--selected":{boxShadow:c.getPropertyValue("box-shadow"),border:c.getPropertyValue("border"),borderRadius:c.getPropertyValue("border-radius"),background:c.getPropertyValue("background"),outline:c.getPropertyValue("outline"),outlineOffset:c.getPropertyValue("outline-offset")},".Input:focus":{color:c.getPropertyValue("color"),fontSize:c.getPropertyValue("font-size"),fontWeight:c.getPropertyValue("font-weight"),lineHeight:c.getPropertyValue("line-height"),padding:c.getPropertyValue("padding"),boxShadow:c.getPropertyValue("box-shadow"),border:c.getPropertyValue("border"),borderRadius:c.getPropertyValue("border-radius"),background:c.getPropertyValue("background"),outline:c.getPropertyValue("outline"),outlineOffset:c.getPropertyValue("outline-offset")}})}})}return p({loader:"auto"},e)}function d(e){return e.settings.paymentMethods[0]}function y(){var e=this.settings,t=this.state,r=e.paymentMethods,n=t.isOptionallyRecurring,a=t.price,o=a.currency,i=a.can_recur,c=a.recurring,u=r.filter((function(e){return e.currencies.includes(o)})).map((function(e){return e.id})),s=r.filter((function(e){return!0===e.recurring})).map((function(e){return e.id})),l=r.filter((function(e){var t=e.id;return!!u.includes(t)&&(!(!i&&c||i&&n&&c)||s.includes(t))})).map((function(e){return e.id}));return l.includes("card")&&l.push("link"),l}function f(){return{us_bank_account:{verification_method:"instant"}}}function g(e){return Object.values(e.settings.prices).filter((function(e){return!0===e.default}))[0]}var v=r(3),h=r.n(v);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e){var t,r=e.cart,n=e.cart.taxStatus,a=e.error,o=e.disable,i=e.enable,c=e.formId,u=e.settings,l=e.setState,p=e.state,m=u.addressType,d=p.displayType,y=p.coupon,f=p.customAmount,g=p.isCoveringFees,v=p.isOptionallyRecurring;if("automatic"!==n||"stripe_checkout"===d)return Promise.resolve(null);var b=p["".concat(m,"Address")]||!1;if(!b||!b.complete)return Promise.resolve(null);a(""),o();var _=r.getLineItem("base");return window.wp.apiFetch({path:"wpsp/__internal__/payment/calculate-tax",method:"POST",data:(t={form_id:c,price_id:_.price.id,quantity:_.quantity,custom_amount:f,is_optionally_recurring:v,is_covering_fees:g,coupon_code:!1!==y?y:null},s()(t,"".concat(m,"_address"),b.address||null),s()(t,"form_values",h()(e,{hash:!0})),t)}).then((function(e){var t=e.total_details,n=e.upcoming_invoice,a=e.tax,o=e.id;l({taxCalculationId:o}),r.update({automaticTax:O(O({},t),{},{upcomingInvoice:n}),taxBehavior:a.behavior})})).catch((function(e){a(e)})).finally(i)}function x(){if(window.simpayGoogleRecaptcha){var e=window.simpayGoogleRecaptcha.siteKey;return new Promise((function(t){grecaptcha.execute(e,{action:"simpay_payment"}).then((function(e){return t(e)})).catch((function(){return t(null)}))}))}var t=this.querySelector('[name="h-captcha-response"]');if(t)return Promise.resolve(t.value);var r=this.querySelector('[name="cf-turnstile-response"]');return r?Promise.resolve(r.value):Promise.resolve(null)}function S(e,t){var r,n=this;return function(){for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];clearTimeout(r),r=setTimeout((function(){e.apply(n,o)}),t)}}},,function(e,t,r){var n=r(16);function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,n(a.key),a)}}e.exports=function(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){"use strict";let n;function a(e){if("string"!=typeof e||-1===e.indexOf("&"))return e;void 0===n&&(n=document.implementation&&document.implementation.createHTMLDocument?document.implementation.createHTMLDocument("").createElement("textarea"):document.createElement("textarea")),n.innerHTML=e;const t=n.textContent;return n.innerHTML="",t}r.d(t,"a",(function(){return a}))},function(e,t,r){"use strict";r.d(t,"a",(function(){return g})),r.d(t,"b",(function(){return v}));var n=function(e){return"string"!=typeof e||""===e?(console.error("The namespace must be a non-empty string."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)||(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)},a=function(e){return"string"!=typeof e||""===e?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)||(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)},o=function(e){return function(t,r,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;if(a(t)&&n(r))if("function"==typeof o)if("number"==typeof i){var c={callback:o,priority:i,namespace:r};if(e[t]){var u,s=e[t].handlers;for(u=s.length;u>0&&!(i>=s[u-1].priority);u--);u===s.length?s[u]=c:s.splice(u,0,c),(e.__current||[]).forEach((function(e){e.name===t&&e.currentIndex>=u&&e.currentIndex++}))}else e[t]={handlers:[c],runs:0};"hookAdded"!==t&&y("hookAdded",t,r,o,i)}else console.error("If specified, the hook priority must be a number.");else console.error("The hook callback must be a function.")}},i=function(e,t){return function(r,o){if(a(r)&&(t||n(o))){if(!e[r])return 0;var i=0;if(t)i=e[r].handlers.length,e[r]={runs:e[r].runs,handlers:[]};else for(var c=e[r].handlers,u=function(t){c[t].namespace===o&&(c.splice(t,1),i++,(e.__current||[]).forEach((function(e){e.name===r&&e.currentIndex>=t&&e.currentIndex--})))},s=c.length-1;s>=0;s--)u(s);return"hookRemoved"!==r&&y("hookRemoved",r,o),i}}},c=function(e){return function(t,r){return void 0!==r?t in e&&e[t].handlers.some((function(e){return e.namespace===r})):t in e}},u=function(e,t){return function(r){e[r]||(e[r]={handlers:[],runs:0}),e[r].runs++;for(var n=e[r].handlers,a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];if(!n||!n.length)return t?o[0]:void 0;var c={name:r,currentIndex:0};for(e.__current.push(c);c.currentIndex<n.length;){var u=n[c.currentIndex],s=u.callback.apply(null,o);t&&(o[0]=s),c.currentIndex++}return e.__current.pop(),t?o[0]:void 0}},s=function(e){return function(){return e.__current&&e.__current.length?e.__current[e.__current.length-1].name:null}},l=function(e){return function(t){return void 0===t?void 0!==e.__current[0]:!!e.__current[0]&&t===e.__current[0].name}},p=function(e){return function(t){if(a(t))return e[t]&&e[t].runs?e[t].runs:0}},m=function(){var e=Object.create(null),t=Object.create(null);return e.__current=[],t.__current=[],{addAction:o(e),addFilter:o(t),removeAction:i(e),removeFilter:i(t),hasAction:c(e),hasFilter:c(t),removeAllActions:i(e,!0),removeAllFilters:i(t,!0),doAction:u(e),applyFilters:u(t,!0),currentAction:s(e),currentFilter:s(t),doingAction:l(e),doingFilter:l(t),didAction:p(e),didFilter:p(t),actions:e,filters:t}},d=m(),y=(d.addAction,d.addFilter,d.removeAction,d.removeFilter,d.hasAction,d.hasFilter,d.removeAllActions,d.removeAllFilters,d.doAction),f=(d.applyFilters,d.currentAction,d.currentFilter,d.doingAction,d.doingFilter,d.didAction,d.didFilter,d.actions,d.filters,m()),g=f.addAction,v=(f.addFilter,f.doAction);f.applyFilters},,function(e,t,r){var n=r(2).default,a=r(19);e.exports=function(e){var t=a(e,"string");return"symbol"===n(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},,function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){var n=r(2).default;e.exports=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){"use strict";r.d(t,"a",(function(){return O})),r.d(t,"b",(function(){return f}));var n=r(8),a=r.n(n),o=r(2),i=r.n(o),c=r(0),u=r.n(c),s=r(12),l=r.n(s),p=r(11),m=r.n(p);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=function(){function e(t,r){if(l()(this,e),this.cart=null,this.id=null,this.title=null,this.amount=0,this.quantity=1,this.subscription=!1,this.price=null,"object"!==i()(r))throw{id:"invalid-line-item-cart",message:"Item must have an cart."};this.cart=r,this.update(t)}return m()(e,[{key:"update",value:function(e){var t=y(y({},this),e),r=t.id,n=t.title,a=t.amount,o=t.quantity,c=t.subscription,u=t.price;if("string"!=typeof r)throw{id:"invalid-line-item-id",message:"Item ID must be a string."};if(this.id=r,"string"!=typeof n)throw{id:"invalid-line-item-title",message:"Item title must be a string."};if(this.title=n,!Number.isSafeInteger(a))throw{id:"invalid-line-item-amount",message:"Item amount must be an integer."};if(this.amount=a,!Number.isSafeInteger(o))throw{id:"invalid-line-item-quantity",message:"Item quantity must be an integer."};if(this.quantity=o,!1!==c&&"object"!==i()(c))throw{id:"invalid-line-item-subscription",message:"Item subscription data must be a false or contain subscription data."};return this.subscription=c,"object"===i()(u)&&null!==u?this.price=u:this.price=null,this}},{key:"remove",value:function(){var e=this,t=this.cart.getLineItems().filter((function(t){var r=t.id;return e.id!==r}));return this.cart.items=t,this}},{key:"getUnitPrice",value:function(){return this.amount}},{key:"getQuantity",value:function(){return this.quantity}},{key:"getDiscount",value:function(){var e=this.cart.getDiscount();if(0===e)return 0;var t=this.cart.getLineItems().filter((function(e){return!e.hasFreeTrial()&&0!==e.getUnitPrice()}));return Math.round(e/t.length)}},{key:"getSubtotal",value:function(){if(this.hasFreeTrial())return 0;var e=this.getUnitPrice()*this.getQuantity();return 0===e?e:Math.round(e-this.getDiscount())}},{key:"getInclusiveTaxAmount",value:function(){var e=this.cart.getTaxPercent("inclusive")/100,t=this.getSubtotal(),r=Math.round(t-t/(1+e));return Math.round(t-(t-r))}},{key:"getTaxableAmount",value:function(){var e=this.getSubtotal(),t=this.getInclusiveTaxAmount();return Math.round(e-t)}},{key:"getTax",value:function(){if("automatic"===this.cart.taxStatus||"none"===this.cart.taxStatus)return 0;var e=this.getTaxableAmount(),t=this.cart.getTaxPercent("exclusive");return Math.round(e*(t/100))}},{key:"getTotal",value:function(){return this.getSubtotal()+this.getTax()}},{key:"hasFreeTrial",value:function(){var e=this.price;return!!e&&!1!==this.subscription&&e.recurring&&e.recurring.trial_period_days}}]),e}(),g=f;function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b={includeFeeRecovery:!0},O=function(){function e(t){l()(this,e),this.LineItem=g,this.paymentForm=null,this.items=[],this.currency="usd",this.taxPercent=0,this.taxRates=[],this.taxStatus="fixed-global",this.taxBehavior="exclusive",this.automaticTax={},this.coupon=!1,this.isNonDecimalCurrency=!1,this.update(t)}return m()(e,[{key:"update",value:function(e){var t=h(h({},this),e),r=t.paymentForm,n=t.currency,a=t.taxPercent,o=t.taxRates,c=t.taxStatus,u=t.taxBehavior,s=t.automaticTax,l=t.coupon,p=t.isNonDecimalCurrency;if(this.paymentForm=r,"string"!=typeof n)throw{id:"invalid-currency",message:"Currency must be a string."};if(this.currency=n,isNaN(a))throw{id:"invalid-tax-percent",message:"Tax percentage must be a number."};if(this.taxPercent=parseFloat(a),o&&Array.isArray(o)&&(this.taxRates=o),c&&"string"==typeof c&&(this.taxStatus=c),u&&"string"==typeof u&&(this.taxBehavior=u),s&&"object"===i()(s)&&(this.automaticTax=s),!1!==l&&"object"!==i()(l))throw{id:"invalid-coupon",message:"Coupon must be a false or contain coupon data."};if(this.coupon=l,"boolean"!=typeof p)throw{id:"invalid-non-decimal-currency",message:"Declaring a non-decimal currency must be a boolean."};return this.isNonDecimalCurrency=p,this}},{key:"reset",value:function(){return new e}},{key:"getCurrency",value:function(){var e,t;return(null===(e=this.getLineItem("base"))||void 0===e||null===(t=e.price)||void 0===t?void 0:t.currency)||""}},{key:"getCurrencySymbol",value:function(){var e,t;return(null===(e=this.getLineItem("base"))||void 0===e||null===(t=e.price)||void 0===t?void 0:t.currency_symbol)||""}},{key:"isZeroDecimal",value:function(){return this.getLineItem("base").price.is_zero_decimal}},{key:"getCoupon",value:function(){return this.coupon}},{key:"getTaxPercent",value:function(e){return this.getTaxRates().reduce((function(t,r){var n=r.calculation,a=r.percentage;return e!==n?t:t+a}),0)}},{key:"getTaxDecimal",value:function(){return this.taxPercent/100}},{key:"getTaxRates",value:function(){return this.taxRates}},{key:"getLineItems",value:function(){return this.items}},{key:"getSubtotal",value:function(){return this.getLineItems().reduce((function(e,t){return t.hasFreeTrial()?e:e+Math.round(t.getUnitPrice()*t.getQuantity())}),0)}},{key:"getDiscount",value:function(){var e=this.getCoupon(),t=e.percent_off,r=e.amount_off,n=0;return!1===e||(t?n+=Math.round(this.getSubtotal()*(t/100)):r&&(n+=r)),n}},{key:"getTax",value:function(){return"none"===this.taxStatus?0:this.getLineItems().reduce((function(e,t){return e+t.getTax()}),0)}},{key:"getAppliedTaxRates",value:function(){if("none"===this.taxStatus)return{};var e=this.getLineItems(),t=this.getTaxRates().filter((function(e){return"inclusive"!==e.calculation})),r=this.getTaxPercent("exclusive")/100,n=this.getTaxRates().filter((function(e){return"exclusive"!==e.calculation})),o=this.getTaxPercent("inclusive")/100,i={};return e.forEach((function(e){if(!e.hasFreeTrial()){var c=e.getTax(),u=e.getTaxableAmount(),s=e.getInclusiveTaxAmount();t.forEach((function(e,n){var o=e.id,s=e.percentage/100,l=0;if(n===t.length-1){var p=t.filter((function(e){return e.id!==o})).reduce((function(e,t){return e+t.percentage}),0)/100,m=Math.floor(u*p);l=c-m}else l=Math.floor(c*(s/r));i[o]=[].concat(a()(i[o]||[]),[l])})),n.forEach((function(e,t){var r,c=e.id,u=e.percentage/100;if(t===n.length-1){var l=n.filter((function(e){return e.id!==c})).reduce((function(e,t){var r=t.percentage;return e+Math.floor(s*(r/100/o))}),0);r=s-l}else r=Math.floor(s*(u/o));i[c]=[].concat(a()(i[c]||[]),[r])}))}})),i}},{key:"getTotal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=this.getLineItems().reduce((function(e,t){return e+t.getTotal()}),0),r=e.includeFeeRecovery?this.getFeeRecoveryForAmount(t):0;return t+r}},{key:"getTotalDueToday",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=0;"exclusive"===this.taxBehavior&&this.automaticTax&&0!==this.getSubtotal()&&(t=parseInt(this.automaticTax.amount_tax||t));var r=this.getLineItems().reduce((function(e,t){return t.hasFreeTrial()?e:e+t.getTotal()}),t),n=0!==r&&e.includeFeeRecovery?this.getFeeRecoveryForAmount(r):0;return r+n}},{key:"getRecurringTotal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=this.getLineItem("base"),r=t.getUnitPrice()*t.getQuantity();r=Math.round(r-this.getDiscount());var n=this.getTaxRates(),a=this.getTaxPercent("inclusive")/100,o=Math.round(r-r/(1+a)),i=Math.round(r-o),c=n.reduce((function(e,t){var r=t.percentage;return"inclusive"===t.calculation?e:e+Math.round(i*(r/100))}),0),u=Math.round(r+c),s=e.includeFeeRecovery?this.getFeeRecoveryForAmount(u):0;return u+s}},{key:"getRecurringNoDiscountTotal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=this.getLineItem("base"),r=t.getUnitPrice()*t.getQuantity(),n=0;if("automatic"!==this.taxStatus&&"none"!==this.taxStatus){var a=this.getTaxRates(),o=this.getTaxPercent("inclusive")/100,i=Math.round(r-r/(1+o)),c=Math.round(r-i);n=a.reduce((function(e,t){var r=t.percentage;return"inclusive"===t.calculation?e:e+Math.round(c*(r/100))}),0)}else if("automatic"===this.taxStatus&&"exclusive"===this.taxBehavior&&this.automaticTax){var u;n=(null===(u=this.automaticTax.upcomingInvoice)||void 0===u?void 0:u.amount_tax)||0}var s=Math.round(r+n),l=e.includeFeeRecovery?this.getFeeRecoveryForAmount(s):0;return s+l}},{key:"getNextInvoiceTotal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=this.getLineItem("base"),r=this.getCoupon(),n=r.percent_off,a=r.amount_off,o=r.duration,i=t.getUnitPrice()*t.getQuantity();if(r&&"once"!==o){var c=0;n?c+=Math.round(i*(n/100)):a&&(c+=a),i=Math.round(i-c)}var u=0;if("automatic"!==this.taxStatus&&"none"!==this.taxStatus){var s=this.getTaxRates(),l=this.getTaxPercent("inclusive")/100,p=Math.round(i-i/(1+l)),m=Math.round(i-p);u=s.reduce((function(e,t){var r=t.percentage;return"inclusive"===t.calculation?e:e+Math.round(m*(r/100))}),0)}else if("automatic"===this.taxStatus&&"exclusive"===this.taxBehavior&&this.automaticTax){var d;u=(null===(d=this.automaticTax.upcomingInvoice)||void 0===d?void 0:d.amount_tax)||0}var y=Math.round(i+u),f=e.includeFeeRecovery?this.getFeeRecoveryForAmount(y):0;return y+f}},{key:"getLineItem",value:function(e){var t=this.getLineItems().filter((function(t){return t.id===e}));if(0===t.length)throw{id:"invalid-line-item",message:'Unable to retrieve line item "'.concat(e,'"')};return t[0]}},{key:"addLineItem",value:function(e){var t;return t=1==e instanceof g?e:new this.LineItem(e,this),this.items.push(t),t}},{key:"hasFreeTrial",value:function(){return this.getLineItems().filter((function(e){return e.hasFreeTrial()})).length>0}},{key:"getFeeRecoveryForAmount",value:function(e){var t=this.paymentForm.state,r=t.paymentMethod,n=t.isCoveringFees;if(!r||!r.config)return 0;var a=r.config.fee_recovery;return a&&n?Math.round((e+parseInt(a.amount))/(1-parseFloat(a.percent)/100)-e):0}}]),e}()},function(e,t,r){"use strict";r.d(t,"d",(function(){return u})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return l}));var n=r(0),a=r.n(n),o=r(35);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t){var r=e.querySelector(".simpay-payment-method-error");if(r){var n=e.i18n.emptyPaymentMethodError;r.innerText=t||n,r.style.display="block",wp.a11y.speak(n,"assertive")}}function s(e){var t=e.querySelector(".simpay-payment-method-error");t&&(t.innerText="",t.style.display="none")}function l(e){e.classList.remove("simpay-checkout-form--loading"),e.classList.add("simpay-checkout-form--requires_payment_method"),e.querySelectorAll("input, select, textarea").forEach((function(e){e.disabled=!0,e.tabIndex=-1})),Object(o.b)(e)}function p(e,t){var r=t.paymentForm,n=r.cart,a=r.getPaymentMethodTypes,o=r.stripeElements,i=n.getLineItem("base").price;o.update({currency:n.getCurrency(),capture_method:"automatic",amount:0===n.getTotalDueToday()?100:n.getTotalDueToday(),setup_future_usage:i.recurring||r.state.isOptionallyRecurring?"off_session":null,payment_method_types:a(r)})}t.a=function(e){var t=e.paymentForm,r=t.type,n=t.enable;"off-site"!==r?(function(e){var t=e.paymentForm,r=t.getPaymentMethodTypes,n=t.enable,a=t.i18n,o=t.setState,i=t.settings,m=t.stripeElements,d=i.hasPhoneField,y=i.hasNameField,f=i.hasLinkEmailField,g=i.hasWallets,v=i.paymentMethods,h=m.create("payment",{wallets:{applePay:g?"auto":"never",googlePay:g?"auto":"never"},business:{name:a.siteTitle||""},layout:{type:"tabs",defaultCollapsed:!1},defaultValues:{billingDetails:{email:t.state.email,name:t.state.name,phone:t.state.phone}},fields:{billingDetails:{email:f?"never":"auto",name:y?"never":"auto",phone:d?"never":"auto",address:"auto"}},paymentMethodOrder:r(t)});h.mount(t.querySelector(".simpay-upe-wrap")),o({paymentElement:h}),h.on("ready",n),h.on("change",(function(r){var n=r.complete,a=r.value,i="apple_pay"===a.type;switch(o({isApplePay:i}),a.type){case"link":case"apple_pay":case"google_pay":a.type="card"}var m=v.filter((function(e){return e.id===a.type}))[0],d=t.state.paymentMethod!==m;(d||n)&&s(t),o({paymentElement:c(c({},h),{},{complete:n}),paymentMethod:m}),d&&(t.state.clientSecret?function(e){var t=e.paymentForm,r=t.disable,n=t.error,a=t.formId,o=t.settings,i=t.setState,c=t.state,u=t.stripeElements,p=o.hasFeeRecovery,m=c.clientSecret,d=c.customAmount,y=c.customerId,f=c.isCoveringFees,g=c.objectId,v=c.paymentMethod,h=c.price;if(!m)return Promise.resolve(null);if(!p)return Promise.resolve(null);r(),n(""),s(t);var b={customer_id:y,form_id:a,object_id:g,price_id:h.id,custom_amount:d,payment_method_type:v.id,is_covering_fees:f};return window.wp.apiFetch({path:"wpsp/__internal__/payment/update",method:"POST",data:b}).then((function(e){i({clientSecret:e.client_secret,objectId:e.object_id,objectPaymentMethodType:v.id}),e.changed&&u.update({clientSecret:e.client_secret})})).catch((function(e){n(e),l(t)}))}(e).catch((function(e){u(e)})).finally((function(){l(t),e.trigger("totalChanged",[e])})):e.trigger("totalChanged",[e])),e.on("totalChanged",p)}))}(e),n()):n()}},function(e,t,r){var n=r(18);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},,,function(e,t,r){"use strict";r.d(t,"c",(function(){return c})),r.d(t,"d",(function(){return u})),r.d(t,"b",(function(){return s}));var n=r(0),a=r.n(n);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e){if(!e.cart.getLineItem("base").price.id.startsWith("simpay_"))return!0;var t=e.querySelector('input[name="simpay_custom_price_amount"]');return!t||""!==t.value}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.querySelector(".simpay-custom-amount-error");if(r){var n=e.cart,a=e.convertToDollars,o=e.formatCurrency,i=e.i18n,c=e.state,u=c.price.unit_amount_min,s=i.emptyCustomAmountError.replace("%s",o(n.isZeroDecimal()?u:a(u),!0,n.getCurrencySymbol(),n.isZeroDecimal()));r.innerText=t||s,r.style.display="block",wp.a11y.speak(s,"assertive"),e.querySelector(".simpay-custom-amount-container").classList.add("is-error"),e.querySelector('input[name="simpay_custom_price_amount"]').focus()}}function s(e){var t=e.querySelector(".simpay-custom-amount-error");t&&(t.innerText="",t.style.display="none")}t.a=function(e){e.on("simpayMultiPlanChanged",(function(){s(e.paymentForm),function(e){var t=e.paymentForm,r=t.cart,n=t.convertToDollars,a=t.formatCurrency,o=r.getLineItem("base").price,c=o.id,u=o.unit_amount,s=o.currency_symbol,l=t.querySelector(".simpay-custom-amount-container");if(l){var p=l.querySelector(".simpay-currency-symbol"),m=t.querySelector('input[name="simpay_custom_price_amount"]');l.style.display=c.startsWith("simpay_")?"block":"none",p.innerHTML=s;var d=r.getLineItem("base");d.update(i(i({},d),{},{amount:parseInt(u)}));var y=m.dataset.prefillDefault,f=r.isZeroDecimal()?u:n(u),g=c.startsWith("simpay_")?a(f,!1,r.getCurrencySymbol(),r.isZeroDecimal()):"";""!==y?m.value=g:(m.placeholder=g,m.value="")}}(e)})),function(e){var t=e.paymentForm.querySelector('input[name="simpay_custom_price_amount"]');t&&t.addEventListener("blur",(function(t){!function(e,t){if(""!==e){var r=t.paymentForm,n=r.cart,a=r.convertToCents,o=r.convertToDollars,c=r.formatCurrency,l=r.i18n,p=r.unformatCurrency,m=n.getLineItem("base"),d=m.price.unit_amount_min,y=n.isZeroDecimal()?p(e):a(p(e)),f=r.querySelector('input[name="simpay_custom_price_amount"]'),g=c(n.isZeroDecimal()?d:o(d),!0,n.getCurrencySymbol(),n.isZeroDecimal());y<d?(r.setState({customAmount:d}),f.parentNode.classList.add("is-error"),f.value="",f.focus(),u(r,l.minCustomAmountError.replace("%s",g))):(s(r),r.setState({customAmount:y}),m.update(i(i({},m),{},{amount:y})),f.parentNode.classList.remove("is-error"),f.value=c(n.isZeroDecimal()?void 0:o(y),!1,n.getCurrencySymbol(),n.isZeroDecimal())),t.trigger("totalChanged",[t])}}(t.target.value,e)}))}(e)}},function(e,t,r){"use strict";r.d(t,"d",(function(){return u})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return l}));var n=r(0),a=r.n(n),o=r(9);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e.querySelector(".simpay-address-error");if(r){var n=e.i18n,a=n.emptyAddressError;r.style.display="block",r.innerText=t||a,wp.a11y.speak(a,"assertive")}}function s(e){var t=e.querySelector(".simpay-address-error");t&&(t.style.display="none",t.innerText="")}function l(e){var t=e.settings,r=e.state,n=t.addressType,a=r["".concat(n,"AddressElement")],o=r.paymentMethod;if(!a||"billing"===n&&"klarna"===o.id)return!0;var i=!r["".concat(n,"Address")]||r["".concat(n,"Address")].complete;return i||a.focus(),i}t.a=function(e){var t=e.paymentForm,r=t.settings,n=t.setState,i=t.state,u=t.stripeElements,l=r.addressType,p=t.querySelector(".simpay-".concat(l,"-address-container .simpay-address-element"));if(p){var m=u.create("address",{mode:l,fields:{phone:"never"}});m.mount(p),n(a()({},"".concat(l,"AddressElement"),m));var d=Object(o.d)((function(t){n(a()({},"".concat(l,"Address"),c(c({complete:t.complete},i["".concat(l,"Address")]),t.value))),t.complete&&e.trigger("totalChanged",[e])}),500);m.on("change",(function(e){s(t),d(e)}))}}},function(e,t,r){"use strict";r.d(t,"d",(function(){return u})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return l}));var n=r(0),a=r.n(n),o=r(9);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t){var r=e.querySelector(".simpay-email-error");if(r){var n=e.i18n.emptyEmailError;r.innerText=t||n,r.style.display="block",wp.a11y.speak(n,"assertive")}}function s(e){var t=e.querySelector(".simpay-email-error");t&&(t.innerText="",t.style.display="none")}function l(e){var t=e.state.linkAuthenticationElement;return!t||!!t.complete||(t.focus(),!1)}t.a=function(e){var t=e.paymentForm,r=t.setState,n=t.state,a=t.stripeElements,i=n.paymentElement,u=t.querySelector(".simpay-link-authentication-container");if(u){var s=a.create("linkAuthentication");r({linkAuthenticationElement:s});var l=t.querySelector(".simpay-email"),p=Object(o.d)((function(e){var t=e.complete,n=e.value;r({email:n.email,linkAuthenticationElement:c(c({},s),{},{complete:t})}),t&&i.update({defaultValues:{billingDetails:{email:n.email}}})}),500);s.on("change",(function(e){var t=e.complete,r=e.value;l.value=r.email,p({complete:t,value:r})})),s.mount(u)}}},function(e,t,r){var n=r(18);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},function(e,t,r){"use strict";r.d(t,"b",(function(){return o}));var n=r(2),a=r.n(n);function o(e){!function(e){var t=e.querySelector(".simpay-subtotal-amount-value");if(t){var r=e.cart,n=e.convertToDollars,a=(0,e.formatCurrency)(r.isZeroDecimal()?r.getSubtotal():n(r.getSubtotal()),!0,r.getCurrencySymbol(),r.isZeroDecimal());t.innerText=a,e.querySelector(".simpay-subtotal-amount-container").style.display=r.getTotal()!==r.getSubtotal()||"automatic"===r.taxStatus?"block":"none"}}(e),function(e){var t=e.querySelector(".simpay-coupon-amount-container");if(t){var r=e.cart,n=e.convertToDollars,o=e.formatCurrency,i=r.getCoupon();if("object"===a()(i)){t.style.display="block";var c=o(r.isZeroDecimal()?r.getDiscount():n(r.getDiscount()),!0,r.getCurrencySymbol(),r.isZeroDecimal());e.querySelector(".simpay-coupon-amount-name").innerText=i.id,e.querySelector(".simpay-coupon-amount-value").innerText="-".concat(c)}else t.style.display="none"}}(e),function(e){var t=e.cart,r=e.convertToDollars,n=e.formatCurrency,a=e.state,o=t.automaticTax;if(e.querySelector(".simpay-tax-amount-container"))switch(t.taxStatus){case"none":return;case"automatic":var i=e.settings.addressType,c=a["".concat(i,"Address")];c&&c.complete&&(e.querySelector(".simpay-automatic-tax-label .simpay-tax-amount-value").innerText=n(t.isZeroDecimal()?o.amount_tax:r(o.amount_tax),!0,t.getCurrencySymbol(),t.isZeroDecimal()));break;default:var u=t.getAppliedTaxRates();Object.values(u).forEach((function(a,o){var i=a.reduce((function(e,t){return e+t}),0),c=n(t.isZeroDecimal()?i:r(i),!0,t.getCurrencySymbol(),t.isZeroDecimal());e.querySelector(".simpay-tax-amount-value-".concat(Object.keys(u)[o])).innerText=c}))}}(e),function(e){var t=e.querySelectorAll(".simpay-total-amount-value");if(0!==t.length){var r=e.cart,n=e.convertToDollars,a=(0,e.formatCurrency)(r.isZeroDecimal()?r.getTotalDueToday():n(r.getTotalDueToday()),!0,r.getCurrencySymbol(),r.isZeroDecimal());t.forEach((function(e){return e.innerHTML=a}))}}(e),function(e){var t,r=e.querySelector(".simpay-fee-recovery-container");if(r){var n=e.querySelector(".simpay-fee-recovery-amount-value"),a=e.cart,o=e.convertToDollars,i=e.formatCurrency,c=e.state.paymentMethod,u=a.getTotalDueToday({includeFeeRecovery:!1}),s=0===u?a.getNextInvoiceTotal({includeFeeRecoveryFee:!1}):u;r.style.display=null!==(t=c.config)&&void 0!==t&&t.fee_recovery?"block":"none",s=i(a.isZeroDecimal()?a.getFeeRecoveryForAmount(s):o(a.getFeeRecoveryForAmount(s)),!0,a.getCurrencySymbol(),a.isZeroDecimal()),n.innerText=s}}(e),function(e){var t=e.querySelector(".simpay-total-amount-recurring-container");if(t)if(!1===e.cart.getLineItem("base").subscription)t.style.display="none";else{var r=function(e){var t=e.cart,r=e.convertToDollars,n=e.formatCurrency,a=e.i18n,o=a.recurringIntervals,i=a.recurringIntervalDisplay,c=a.recurringIntervalDisplayLimitedDiscount,u=a.recurringIntervalDisplayAutomaticTaxDiscount,s=a.recurringIntervalDisplayInvoiceLimit,l=a.recurringIntervalDisplayInvoiceLimitWithCoupon,p=t.coupon,m=t.taxStatus,d=t.getLineItem("base"),y=d.price.recurring.invoice_limit,f=d.subscription,g=f.interval,v=f.intervalCount,h=o[g],b=n(t.isZeroDecimal()?t.getNextInvoiceTotal():r(t.getNextInvoiceTotal()),!0,t.getCurrencySymbol(),t.isZeroDecimal());if(y)return(p&&"forever"!==p.duration?l:s).replace("%1$d",y).replace("%2$s",b).replace("%3$s",1===v?"":v).replace("%4$s",1===v?h[0]:h[1]);var O=n(t.isZeroDecimal()?t.getRecurringNoDiscountTotal():r(t.getRecurringNoDiscountTotal()),!0,t.getCurrencySymbol(),t.isZeroDecimal());return(p&&"repeating"===p.duration&&p.duration_in_months>=function(e,t){switch(e){case"day":return t/30;case"week":return t/4;case"month":return t;case"year":return 12}}(g,v)?"automatic"===m?u.replace("%1$s",b):c.replace("%1$s",b):p&&"once"===p.duration?i.replace("%1$s",O):p&&"forever"===p.duration?i.replace("%1$s",b):i.replace("%1$s",O)).replace("%2$s",1===v?"":v).replace("%3$s",1===v?h[0]:h[1]).replace("%4$s",p.duration_in_months).replace("%5$s",i.replace("%1$s",O).replace("%2$s",1===v?"":v).replace("%3$s",1===v?h[0]:h[1]))}(e);e.querySelector(".simpay-total-amount-recurring-value").innerText=r,t.style.display="block"}}(e)}t.a=function(e){var t=e.paymentForm;e.on("totalChanged",(function(){o(t)})),o(t)}},,,,function(e,t,r){"use strict";r.d(t,"b",(function(){return a}));var n=r(14);function a(e){var t=e.cart,r=e.convertToDollars,n=e.formatCurrency,a=e.i18n,o=a.checkoutButtonText,i=a.checkoutButtonTrialText,c=e.querySelector(".simpay-checkout-btn");if(c){var u;if(c.disabled=!1,c.classList.remove("simpay-disabled"),0===t.getTotalDueToday())u=i;else{var s=n(t.isZeroDecimal()?t.getTotalDueToday():r(t.getTotalDueToday()),!0,t.getCurrencySymbol(),t.isZeroDecimal()),l='<em class="simpay-total-amount-value">'.concat(s,"</span>");u=o.replace("{{amount}}",l)}c.querySelector("span").innerHTML=u}}function o(e){var t=e.i18n.checkoutButtonLoadingText,r=e.querySelector(".simpay-checkout-btn");r&&(r.disabled=!0,r.classList.add("simpay-disabled"),r.querySelector("span").innerText=t)}t.a=function(e){Object(n.a)("simpayEnablePaymentForm","wpsp/paymentForm",a),Object(n.a)("simpayDisablePaymentForm","wpsp/paymentForm",o)}},,,,,,,,,,,,function(e,t,r){"use strict";(function(e){var n=r(0),a=r.n(n),o=r(14),i=r(20),c=r(53),u=r(31),s=r(9),l=r(49),p=r(50),m=r(51);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=window.simplePayForms;t.a=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.formId=parseInt(t.dataset.simpayFormId),r||(r=f[t.formId]),t=Object.assign(t,r),window.spShared={convertToDollars:t.convertToDollars,convertToCents:t.convertToCents,formatCurrency:t.formatCurrency,unformatCurrency:t.unformatCurrency},t.state={price:Object(s.g)(t),paymentMethod:Object(s.f)(t),customAmount:null,taxAmount:0,couponCode:null},t.setState=function(e){t.state=y(y({},t.state),e)},t.enable=p.a.bind(t),t.disable=m.a.bind(t),t.error=l.a.bind(t),t.convertToCents=s.b.bind(t),t.convertToDollars=s.c.bind(t),t.formatCurrency=s.e.bind(t),t.unformatCurrency=s.m.bind(t),t.getPaymentMethodTypes=s.j.bind(t),t.getPaymentMethodOptions=s.i.bind(t),t.getToken=s.k.bind(t),t.disable(),t.cart=Object(s.l)(new i.a({paymentForm:t}),t),t.stripejs=Stripe(t.stripe.apiKey,{apiVersion:t.stripe.apiVersion,locale:t.stripe.elementsLocale,betas:["elements_enable_deferred_intent_beta_1"]}),t.stripeElements=t.stripejs.elements(y(y({},Object(s.h)(t.stripe.elements)),{},{mode:"payment",amount:0!==t.cart.getTotalDueToday()?t.cart.getTotalDueToday():100,currency:t.cart.getCurrency(),setup_future_usage:t.cart.getLineItem("base").price.recurring||t.state.isOptionallyRecurring?"off_session":null,payment_method_types:t.getPaymentMethodTypes(),payment_method_options:t.getPaymentMethodOptions()}));var n=e(t);return n.paymentForm=t,n.cart=t.cart,n.state=t.state,n.setState=t.setState,n.enable=t.enable,n.disable=t.disable,n.error=t.error,n.on("totalChanged",(function(){Object(s.a)(t).then((function(){return Object(u.b)(t)}))})),Object(c.a)(n),Object(o.b)("simpaySetupPaymentForm",n),e(document.body).trigger("simpayCoreFormVarsInitialized",[n]).trigger("simpayBindCoreFormEventsAndTriggers",[n]).trigger("simpaySetupCoreForm",[n]),n}}).call(this,r(6))},function(e,t,r){"use strict";(function(e){t.a=function(t){if(e.datepicker){var r=t.paymentForm.i18n,n=t.find(".simpay-date-input");n.datepicker({dateFormat:r.dateFormat,beforeShow:function(){e(".ui-datepicker").addClass("simpay-datepicker")}}),""!==n.val()&&n.datepicker("setDate",new Date(n.val()))}}}).call(this,r(6))},function(e,t,r){"use strict";(function(e){t.a=function(t){var r,n=this.i18n,a=n.stripeErrorMessages,o=n.unknownError;if(t&&""===t)r="";else if(void 0!==t){var i=t.message,c=t.code;r=i||t,c&&a[c]&&(r=a[c])}else r=o;var u=this.querySelector(".simpay-generic-error");u.style.display="block",e(u).html(r),wp.a11y.speak(r,"assertive")}}).call(this,r(6))},function(e,t,r){"use strict";var n=r(14);t.a=function(){this.classList.remove("simpay-checkout-form--loading"),this.querySelectorAll("input, select, textarea").forEach((function(e){return e.readOnly=!1})),Object(n.b)("simpayEnablePaymentForm",this)}},function(e,t,r){"use strict";var n=r(14);t.a=function(){this.classList.add("simpay-checkout-form--loading"),this.querySelectorAll("input, select, textarea").forEach((function(e){return e.readOnly=!0})),Object(n.b)("simpayDisablePaymentForm",this)}},function(e,t,r){"use strict";var n=r(2),a=r.n(n);function o(e){var t=!1;"object"===a()(e)?(e.preventDefault(),t=e.target.dataset.formId):t=e;var r=document.querySelectorAll('.simpay-modal[data-form-id="'+t+'"]');0!==r.length&&(r=r[r.length-1],document.body.appendChild(r),"0"!==getComputedStyle(r).getPropertyValue("opacity")?(r.style.opacity=0,r.style.height=0):(r.style.opacity=1,r.style.height="100%",function(e){var t=["button:not([disabled])",'input:not([type="hidden"]):not([aria-hidden]):not([disabled])',"select:not([disabled])","textarea:not([disabled])"].join(","),r=e.querySelector(t);r&&(r.focus(),r.parentElement.classList.add("is-focused"))}(r)))}var i=!1;t.a=function(){if(!0!==i){i=!0;var e=document.querySelectorAll("input.simpay-modal-control"),t=document.querySelectorAll("*:not(input).simpay-modal-control");e.forEach((function(e){e.addEventListener("change",o)})),t.forEach((function(e){e.addEventListener("click",o)}))}}},function(e,t,r){"use strict";var n=r(21),a=r(0),o=r.n(a);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t){var r=t.paymentForm,n=r.cart,a=r.error,o=r.setState,i=JSON.parse(e.dataset.price);a("");var u=i.id,s=i.can_recur,l=i.recurring,p=i.line_items,m=i.unit_amount,d=(l||{}).trial_period_days,y=void 0!==d&&d,f=n.getLineItem("base"),g=c(c({},f),{},{amount:parseInt(m),title:i.label||i.generated_label,price:i});g.subscription=!(!l||!1!==s)&&{isTrial:!!l.trial_period_days&&parseInt(l.trial_period_days),interval:l.interval,intervalCount:parseInt(l.interval_count)},f.update(g);var v=n.getLineItem("setup-fee"),h=n.getLineItem("plan-setup-fee");v.update(c(c({},v),{},{amount:p&&p[0]&&!1===s?parseInt(p[0].unit_amount):0})),h.update(c(c({},h),{},{amount:p&&p[1]&&!1===s?parseInt(p[1].unit_amount):0}));var b=u.startsWith("simpay_");o({price:i,isCustomAmount:b,customAmount:b?m:null,isTrial:y}),t.trigger("simpayMultiPlanChanged",[i,t]),t.trigger("totalChanged",[t])}var s=r(25);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e){var t=e.paymentForm,r=t.cart.getLineItem("base").price.can_recur,n=t.querySelector(".simpay-recurring-amount-toggle-container");n&&(t.querySelector(".simpay-recurring-amount-toggle").checked=!1,t.setState({isOptionallyRecurring:!1}),n.style.display=r?"block":"none")}var d=function(e){e.on("simpayMultiPlanChanged",(function(){return m(e)})),m(e),function(e){var t=e.paymentForm.querySelector(".simpay-recurring-amount-toggle");t&&t.addEventListener("change",(function(t){!function(e,t){var r=t.paymentForm,n=r.cart,a=r.setState,o=n.getLineItem("base"),i=o.price,c=i.recurring,u=i.line_items,s=!0===e.checked&&{isTrial:!!c.trial_period_days&&parseInt(c.trial_period_days),interval:c.interval,intervalCount:parseInt(c.interval_count)};o.update(p(p({},o),{},{subscription:s}));var l=n.getLineItem("setup-fee"),m=n.getLineItem("plan-setup-fee");l.update(p(p({},l),{},{amount:!0===e.checked&&u&&u[0]?parseInt(u[0].unit_amount):0})),m.update(p(p({},m),{},{amount:!0===e.checked&&u&&u[1]?parseInt(u[1].unit_amount):0})),a({isOptionallyRecurring:e.checked}),t.trigger("totalChanged",[t])}(t.target,e)}))}(e)},y=r(31);function f(e){var t=e.paymentForm,r=1;t.querySelector(".simpay-quantity-dropdown")?(r=parseFloat(e.find(".simpay-quantity-dropdown").find("option:selected").data("quantity")),e.trigger("simpayDropdownQuantityChange")):t.querySelector(".simpay-quantity-radio")?(r=parseFloat(e.find(".simpay-quantity-radio").find('input[type="radio"]:checked').data("quantity")),e.trigger("simpayRadioQuantityChange")):t.querySelector(".simpay-quantity-input")&&(r=parseFloat(e.find(".simpay-quantity-input").val()),e.trigger("simpayNumberQuantityChange")),r<1&&(r=1);try{t.cart.getLineItem("base").update({quantity:r}),t.querySelector(".simpay-quantity").value=r,e.trigger("totalChanged",[e])}catch(e){}}function g(e,t){(0,e.paymentForm.setState)({isCoveringFees:t}),e.trigger("totalChanged",[e])}var v=r(26),h=r(48),b=r(13);function O(e){var t=e.paymentForm,r=t.cart,n=t.disable,a=t.enable,o=t.formId,i=t.setState,c=t.querySelector(".simpay-coupon-field"),u=c.value;""!==u&&(function(e){var t=e.querySelector(".simpay-coupon-error");t.innerText="",t.style.display="none"}(t),n(),window.wp.apiFetch({path:"wpsp/__internal__/payment/validate-coupon",method:"POST",data:{coupon_code:u,form_id:o,currency:r.getCurrency(),subtotal:r.getSubtotal()}}).then((function(n){var a=n.message,o=n.coupon;i({coupon:u}),r.update({coupon:o}),t.querySelector(".simpay-coupon-info").style.display="block",t.querySelector(".simpay-coupon-message").innerText=Object(b.a)(a),wp.a11y.speak(a,"polite"),e.trigger("simpayCouponApplied")})).catch((function(e){var r=e.message;!function(e,t){var r=e.querySelector(".simpay-coupon-error");r.innerText=t,r.style.display="block",wp.a11y.speak(t,"assertive")}(t,r)})).finally((function(){c.value="",e.trigger("totalChanged",[e]),a()})))}function _(e){var t=e.paymentForm;t.querySelector(".simpay-coupon-info").style.display="none",t.querySelector(".simpay-coupon-message").innerText="",t.cart.update({coupon:!1}),t.setState({coupon:!1}),e.trigger("simpayCouponRemoved"),e.trigger("totalChanged",[e])}var x=r(27),S=r(35),P=r(14);function j(e){var t=e.cart,r=e.convertToDollars,n=e.formatCurrency,a=e.i18n,o=a.paymentButtonText,i=a.paymentButtonTrialText,c=e.querySelector(".simpay-payment-btn");if(c){var u;if(c.disabled=!1,c.classList.remove("simpay-disabled"),0===t.getTotalDueToday())u=i;else{var s=n(t.isZeroDecimal()?t.getTotalDueToday():r(t.getTotalDueToday()),!0,t.getCurrencySymbol(),t.isZeroDecimal()),l='<em class="simpay-total-amount-value">'.concat(s,"</span>");u=o.replace("{{amount}}",l)}c.querySelector("span").innerHTML=u}}function T(e){var t=e.i18n.paymentButtonLoadingText,r=e.querySelector(".simpay-payment-btn");r&&(r.disabled=!0,r.classList.add("simpay-disabled"),r.querySelector("span").innerText=t)}t.a=function(e){var t,r,a;Object(s.a)(e),function(e){var t=e.paymentForm,r=t.querySelector(".simpay-plan-select-container");if(r){var n,a=r.dataset.displayType,o=t.querySelectorAll('[name="simpay_price"]');n="dropdown"===a?":selected":":checked";var i=e.find(".simpay-plan-wrapper ".concat(n))[0];i||("dropdown"===a?(i=r.querySelector("option:not([disabled])")).selected=!0:(i=r.querySelector("input:not([disabled])")).checked=!0),o.forEach((function(t){t.addEventListener("change",(function(t){var r=t.target;u("dropdown"===a?r.options[r.selectedIndex]:r,e)}))})),u(i,e)}}(e),d(e),Object(y.a)(e),function(e){f(e),e.find(".simpay-quantity-radio input, .simpay-quantity-dropdown, .simpay-quantity-input").on("change",(function(){return f(e)})),e.on("totalChanged",(function(){return function(e){var t=e.paymentForm,r=t.querySelector('input.simpay-quantity-input[type="number"]');if(r){var n=t.state.price;n.inventory&&(r.max=n.inventory)}}(e)}))}(e),function(e){var t=e.paymentForm.querySelector(".simpay-fee-recovery-toggle");g(e,!t||t&&t.checked),function(e){var t=e.paymentForm,r=t.querySelector(".simpay-fee-recovery-toggle");r&&r.addEventListener("change",(function(r){var n=r.target;g(e,n.checked);var a=t.querySelector(".simpay-fee-recovery-container");a&&(a.style.display=n.checked?"block":"none")}))}(e)}(e),Object(v.a)(e),Object(h.a)(e),function(e){e.paymentForm.querySelector(".simpay-coupon-field")&&(function(e){var t=e.paymentForm;t.querySelector(".simpay-apply-coupon").addEventListener("click",(function(){return O(e)})),t.querySelector(".simpay-coupon-field").addEventListener("keypress",(function(t){if(13===t.which)return t.preventDefault(),O(e)})),t.querySelector(".simpay-remove-coupon").addEventListener("click",(function(t){t.preventDefault(),_(e)}))}(e),e.on("totalChanged",(function(){return function(e){var t=e.paymentForm.cart;if(!1!==t.getCoupon()){var r=t.getLineItem("base").price.currency_min_amount;t.getSubtotal()-t.getDiscount()<r&&_(e)}}(e)})))}(e),function(e){e.paymentForm.querySelector(".simpay-tax-id-container")&&function(e){var t=e.paymentForm,r=t.querySelector(".simpay-tax-id-type"),n=t.querySelector(".simpay-tax-id");r.addEventListener("change",(function(){n.value="",e.trigger("totalChanged",[e])})),n.addEventListener("blur",(function(){e.trigger("totalChanged",[e])}))}(e)}(e),Object(n.a)(e),Object(S.a)(e),Object(P.a)("simpayEnablePaymentForm","wpsp/paymentForm",j),Object(P.a)("simpayDisablePaymentForm","wpsp/paymentForm",T),t=e.paymentForm,r=t.setState,(a=t.querySelector(".simpay-telephone"))&&a.addEventListener("keypress",(function(e){var t=e.target;r({phone:t.value})})),function(e){var t=e.paymentForm,r=t.setState,n=t.state.paymentElement,a=t.querySelector(".simpay-customer-name");a&&a.addEventListener("keypress",(function(e){var t=e.target;r({name:t.value}),n.update({defaultValues:{billingDetails:{name:t.value}}})}))}(e),Object(x.a)(e)}},function(e,t,r){"use strict";var n=r(3),a=r.n(n),o=r(13),i=r(21),c=function(e){var t=e.paymentForm,r=t.cart,n=t.state,a=t.stripejs,c=t.stripeElements,u=n.applePayPaymentMethod,s=n.clientSecret,l=n.email,p=n.isApplePay,m=n.name,d=n.phone,y=n.returnUrl;t.querySelectorAll(".simpay-form-control:not(.simpay-amounts-container):not(.simpay-card-container):not(.simpay-checkout-btn-container):not(.simpay-payment-btn-container)").forEach((function(e){var t=e.querySelectorAll("input, textarea, select");e.classList.add("simpay-disabled"),t.forEach((function(e){e.disabled=!0,e.tabIndex=-1}))}));var f=0===r.getTotalDueToday()?"confirmSetup":"confirmPayment",g={clientSecret:s,confirmParams:{return_url:Object(o.a)(y)}};p?g.confirmParams.payment_method=u.id:(g.elements=c,g.confirmParams.payment_method_data={billing_details:{email:l,name:m,phone:d}}),a[f](g).then((function(e){var r=e.error;r&&(Object(i.d)(t,r.message),Object(i.b)(t))}))},u=r(26),s=r(25),l=r(27);function p(e){var t=e.paymentForm,r=t.cart,n=t.error,o=t.enable,i=t.formId,u=t.getToken,s=t.setState,l=t.state,p=l.billingAddress,m=l.coupon,d=l.customAmount,y=l.isCoveringFees,f=l.isOptionallyRecurring,g=l.paymentMethod,v=l.shippingAddress,h=l.taxCalculationId,b=l.taxAmount,O=r.getLineItem("base");return u(t).then((function(r){var u={token:r,payment_method_type:g.id,form_id:i,price_id:O.price.id,quantity:O.quantity,custom_amount:d,tax_amount:b,is_optionally_recurring:f,is_covering_fees:y,coupon_code:!1!==m?m:null,tax_calc_id:h,billing_address:p?{name:p.name,address:p.address}:null,shipping_address:v?{name:v.name,address:v.address}:null,form_values:a()(t,{hash:!0})};return window.wp.apiFetch({path:"wpsp/__internal__/payment/create",method:"POST",data:u}).then((function(t){var r=t.client_secret,n=t.customer_id,a=t.object_id,o=t.redirect,i=t.return_url;if(!o)return s({clientSecret:r,objectId:a,customerId:n,returnUrl:i}),c(e);window.location.href=o})).catch((function(e){n(e),o()}))}))}t.a=function(e){var t=e.paymentForm,r=t.disable,n=t.enable,a=t.error,o=t.setState,m=t.state,d=t.stripejs,y=t.stripeElements,f=m.clientSecret,g=m.isApplePay,v=m.paymentElement;if(a(""),f&&null!=v&&v.complete)return r(),c(e);if(v&&!v.complete)return Object(i.d)(t),n();if(!Object(l.c)(t))return Object(l.d)(t),n();Object(l.b)(t);var h=Object(u.c)(t);if(!h)return Object(u.d)(t),n();Object(u.b)(t);var b=Object(s.c)(t);if(!b)return Object(s.d)(t),n();Object(s.b)(t);var O={isValid:h&&b};return e.trigger("simpayBeforeStripePayment",[e,O]),O.isValid?(r(),g?d.createPaymentMethod({elements:y}).then((function(t){var r=t.error,n=t.paymentMethod;if(r)throw r;return o({applePayPaymentMethod:n}),p(e)})).catch((function(e){a(e),n()})):p(e)):n()}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t),function(e){var t=r(47),n=r(54),a=r(52);function o(e,r){var a=Object(t.a)(e,r);e.addEventListener("submit",(function(e){e.preventDefault(),Object(n.a)(a)}))}window.wpsp={initPaymentForm:o},e((function(){var e=document.querySelectorAll(".simpay-checkout-form");0!==e.length&&(e.forEach((function(e){o(e)})),Object(a.a)())}))}.call(this,r(6))}]);