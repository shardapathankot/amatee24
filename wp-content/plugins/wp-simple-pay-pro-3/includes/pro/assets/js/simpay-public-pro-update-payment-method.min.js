!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=86)}({0:function(e,t,r){var n=r(16);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},10:function(e,t,r){"use strict";function n(e){"complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",e):e()}r.d(t,"a",(function(){return n}))},13:function(e,t,r){"use strict";let n;function o(e){if("string"!=typeof e||-1===e.indexOf("&"))return e;void 0===n&&(n=document.implementation&&document.implementation.createHTMLDocument?document.implementation.createHTMLDocument("").createElement("textarea"):document.createElement("textarea")),n.innerHTML=e;const t=n.textContent;return n.innerHTML="",t}r.d(t,"a",(function(){return o}))},16:function(e,t,r){var n=r(2).default,o=r(19);e.exports=function(e){var t=o(e,"string");return"symbol"===n(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},19:function(e,t,r){var n=r(2).default;e.exports=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},2:function(e,t){function r(t){return e.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,r(t)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports},3:function(e,t){var r=/^(?:submit|button|image|reset|file)$/i,n=/^(?:input|select|textarea|keygen)/i,o=/(\[[^\[\]]*\])/g;function i(e,t,r){if(t.match(o))!function e(t,r,n){if(0===r.length)return n;var o=r.shift(),i=o.match(/^\[(.+?)\]$/);if("[]"===o)return t=t||[],Array.isArray(t)?t.push(e(null,r,n)):(t._values=t._values||[],t._values.push(e(null,r,n))),t;if(i){var u=i[1],a=+u;isNaN(a)?(t=t||{})[u]=e(t[u],r,n):(t=t||[])[a]=e(t[a],r,n)}else t[o]=e(t[o],r,n);return t}(e,function(e){var t=[],r=new RegExp(o),n=/^([^\[\]]*)/.exec(e);for(n[1]&&t.push(n[1]);null!==(n=r.exec(e));)t.push(n[1]);return t}(t),r);else{var n=e[t];n?(Array.isArray(n)||(e[t]=[n]),e[t].push(r)):e[t]=r}return e}function u(e,t,r){return r=r.replace(/(\r)?\n/g,"\r\n"),r=(r=encodeURIComponent(r)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+r}e.exports=function(e,t){"object"!=typeof t?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);for(var o=t.hash?{}:"",a=t.serializer||(t.hash?i:u),c=e&&e.elements?e.elements:[],s=Object.create(null),l=0;l<c.length;++l){var p=c[l];if((t.disabled||!p.disabled)&&p.name&&n.test(p.nodeName)&&!r.test(p.type)){var d=p.name,f=p.value;if("checkbox"!==p.type&&"radio"!==p.type||p.checked||(f=void 0),t.empty){if("checkbox"!==p.type||p.checked||(f=""),"radio"===p.type&&(s[p.name]||p.checked?p.checked&&(s[p.name]=!0):s[p.name]=!1),null==f&&"radio"==p.type)continue}else if(!f)continue;if("select-multiple"!==p.type)o=a(o,d,f);else{f=[];for(var y=p.options,m=!1,b=0;b<y.length;++b){var g=y[b],h=t.empty&&!g.value,v=g.value||h;g.selected&&v&&(m=!0,o=t.hash&&"[]"!==d.slice(d.length-2)?a(o,d+"[]",g.value):a(o,d,g.value))}!m&&t.empty&&(o=a(o,d,""))}}}if(t.empty)for(var d in s)s[d]||(o=a(o,d,""));return o}},86:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),i=r(10),u=r(13),a=r(9);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var s=simpayUpdatePaymentMethod,l=s.id,p=s.i18n,d=s.payment,f=s.stripe;function y(e){var t=document.querySelector(".simpay-errors");if(t){var r=document.querySelector(".simpay-checkout-btn");r.disabled=!1,r.innerHTML=Object(u.a)(p.submit),t.innerText=e,t.style.display="block",wp.a11y.speak(e,"assertive")}}Object(i.a)((function(){var e=document.getElementById("simpay-form-update-payment-method");if(e){var t=Stripe(f.api_key,{apiVersion:f.api_version,locale:f.elements_locale}),r=t.elements(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({clientSecret:f.client_secret},Object(a.h)(f.elements)));r.create("payment",{wallets:{applePay:"auto",googlePay:"auto"},business:{name:p.site_title||""},layout:{type:"tabs",defaultCollapsed:!1}}).mount(document.querySelector(".simpay-upe-wrap"));var n=document.querySelector(".simpay-checkout-btn");e.addEventListener("submit",(function(e){e.preventDefault(),n.disabled=!0,n.innerText=Object(u.a)(p.loading),t.confirmSetup({elements:r,confirmParams:{return_url:window.location.href},redirect:"if_required"}).then((function(e){var t=e.error,r=e.setupIntent;t?y(t.message):window.wp.apiFetch({path:"wpsp/__internal__/payment/update-payment-method",method:"POST",data:{form_id:l,customer_id:d.customer,setup_intent_id:r.id,payment_method_id:r.payment_method,subscription_id:d.subscription,subscription_key:d.subscription_key}}).then((function(){window.location.replace(window.location.href)})).catch((function(e){y(e.message)}))}))}))}}))},9:function(e,t,r){"use strict";function n(e,t){var r=t.settings,n=r.taxRates,o=r.taxStatus,i=t.state.price,u=i.unit_amount,a=i.currency,c=i.can_recur,s=i.recurring;return e.update({currency:a,taxRates:n,taxStatus:o}),e.addLineItem({id:"setup-fee",title:"Initial Setup Fee",amount:0,quantity:1,subscription:!1}),e.addLineItem({id:"plan-setup-fee",title:"Plan Setup Fee",amount:0,quantity:1,subscription:!1}),e.addLineItem({id:"base",price:i,title:s&&!1===c?"Subscription":"One Time",amount:u,quantity:1,subscription:!(!s||!1!==c)&&{isTrial:!!s.trial_period_days,interval:s.interval,intervalCount:s.interval_count}}),e}function o(e){return Math.abs(accounting.unformat(e,this.i18n.decimalSeparator))}function i(e,t,r,n){var o=t||!1,i=r||this.i18n.currencySymbol,u=n||!1,a="%s%v";if(o)switch(this.i18n.currencyPosition){case"left_space":a="%s %v";break;case"right":a="%v%s";break;case"right_space":a="%v %s"}var c={symbol:o?i:"",decimal:this.i18n.decimalSeparator,thousand:this.i18n.thousandSeparator,precision:u?0:this.i18n.decimalPlaces,format:a};return accounting.formatMoney(e,c)}function u(e){return accounting.toFixed(e/100,2)}function a(e){return Number(accounting.toFixed(100*e,0))}r.d(t,"l",(function(){return n})),r.d(t,"m",(function(){return o})),r.d(t,"e",(function(){return i})),r.d(t,"c",(function(){return u})),r.d(t,"b",(function(){return a})),r.d(t,"h",(function(){return d})),r.d(t,"f",(function(){return f})),r.d(t,"j",(function(){return y})),r.d(t,"i",(function(){return m})),r.d(t,"g",(function(){return b})),r.d(t,"a",(function(){return O})),r.d(t,"k",(function(){return _})),r.d(t,"d",(function(){return w}));var c=r(0),s=r.n(c);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e){if(!e.appearance){var t,r;document.createElement("style").id="simpay-stripe-element-styles",t=document.querySelector('.simpay-checkout-form input[type="text"]'),r=document.querySelector(".simpay-checkout-form label"),t||(t=document.querySelector('body [role="main"] input:not([type="hidden"])'),r=document.querySelector('body [role="main"] label'));var n=window.getComputedStyle(t),o=window.getComputedStyle(r),i={variables:{fontSizeBase:o.getPropertyValue("font-size"),fontFamily:o.getPropertyValue("font-family"),borderRadius:n.getPropertyValue("border-radius")},rules:{".Tab":{boxShadow:n.getPropertyValue("box-shadow"),border:n.getPropertyValue("border"),borderRadius:n.getPropertyValue("border-radius"),background:n.getPropertyValue("background")},".Input":{color:n.getPropertyValue("color"),fontSize:n.getPropertyValue("font-size"),fontWeight:n.getPropertyValue("font-weight"),lineHeight:n.getPropertyValue("line-height"),padding:n.getPropertyValue("padding"),boxShadow:n.getPropertyValue("box-shadow"),border:n.getPropertyValue("border"),borderRadius:n.getPropertyValue("border-radius"),background:n.getPropertyValue("background")}}},u=document.activeElement;t.focus();var a=window.getComputedStyle(t);return u.focus(),p(p({},e),{},{loader:"auto",appearance:{theme:"stripe",variables:p({},i.variables),rules:p(p({},i.rules),{},{".Tab:focus":{boxShadow:a.getPropertyValue("box-shadow"),border:a.getPropertyValue("border"),borderRadius:a.getPropertyValue("border-radius"),background:a.getPropertyValue("background"),outline:a.getPropertyValue("outline"),outlineOffset:a.getPropertyValue("outline-offset")},".Tab--selected":{boxShadow:a.getPropertyValue("box-shadow"),border:a.getPropertyValue("border"),borderRadius:a.getPropertyValue("border-radius"),background:a.getPropertyValue("background"),outline:a.getPropertyValue("outline"),outlineOffset:a.getPropertyValue("outline-offset")},".Input:focus":{color:a.getPropertyValue("color"),fontSize:a.getPropertyValue("font-size"),fontWeight:a.getPropertyValue("font-weight"),lineHeight:a.getPropertyValue("line-height"),padding:a.getPropertyValue("padding"),boxShadow:a.getPropertyValue("box-shadow"),border:a.getPropertyValue("border"),borderRadius:a.getPropertyValue("border-radius"),background:a.getPropertyValue("background"),outline:a.getPropertyValue("outline"),outlineOffset:a.getPropertyValue("outline-offset")}})}})}return p({loader:"auto"},e)}function f(e){return e.settings.paymentMethods[0]}function y(){var e=this.settings,t=this.state,r=e.paymentMethods,n=t.isOptionallyRecurring,o=t.price,i=o.currency,u=o.can_recur,a=o.recurring,c=r.filter((function(e){return e.currencies.includes(i)})).map((function(e){return e.id})),s=r.filter((function(e){return!0===e.recurring})).map((function(e){return e.id})),l=r.filter((function(e){var t=e.id;return!!c.includes(t)&&(!(!u&&a||u&&n&&a)||s.includes(t))})).map((function(e){return e.id}));return l.includes("card")&&l.push("link"),l}function m(){return{us_bank_account:{verification_method:"instant"}}}function b(e){return Object.values(e.settings.prices).filter((function(e){return!0===e.default}))[0]}var g=r(3),h=r.n(g);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e){var t,r=e.cart,n=e.cart.taxStatus,o=e.error,i=e.disable,u=e.enable,a=e.formId,c=e.settings,l=e.setState,p=e.state,d=c.addressType,f=p.displayType,y=p.coupon,m=p.customAmount,b=p.isCoveringFees,g=p.isOptionallyRecurring;if("automatic"!==n||"stripe_checkout"===f)return Promise.resolve(null);var v=p["".concat(d,"Address")]||!1;if(!v||!v.complete)return Promise.resolve(null);o(""),i();var O=r.getLineItem("base");return window.wp.apiFetch({path:"wpsp/__internal__/payment/calculate-tax",method:"POST",data:(t={form_id:a,price_id:O.price.id,quantity:O.quantity,custom_amount:m,is_optionally_recurring:g,is_covering_fees:b,coupon_code:!1!==y?y:null},s()(t,"".concat(d,"_address"),v.address||null),s()(t,"form_values",h()(e,{hash:!0})),t)}).then((function(e){var t=e.total_details,n=e.upcoming_invoice,o=e.tax,i=e.id;l({taxCalculationId:i}),r.update({automaticTax:P(P({},t),{},{upcomingInvoice:n}),taxBehavior:o.behavior})})).catch((function(e){o(e)})).finally(u)}function _(){if(window.simpayGoogleRecaptcha){var e=window.simpayGoogleRecaptcha.siteKey;return new Promise((function(t){grecaptcha.execute(e,{action:"simpay_payment"}).then((function(e){return t(e)})).catch((function(){return t(null)}))}))}var t=this.querySelector('[name="h-captcha-response"]');if(t)return Promise.resolve(t.value);var r=this.querySelector('[name="cf-turnstile-response"]');return r?Promise.resolve(r.value):Promise.resolve(null)}function w(e,t){var r,n=this;return function(){for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];clearTimeout(r),r=setTimeout((function(){e.apply(n,i)}),t)}}}});