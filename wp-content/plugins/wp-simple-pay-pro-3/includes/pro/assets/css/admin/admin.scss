// @import '../core/_mixins';

@import "./datepicker.scss";
@import "./coupons.scss";

// Form settings tabs/pages
#simpay-form-settings {


	// simpay-panel is the main wrapper for all of our form settings
	.simpay-panel {

		table.simpay-multi-subscriptions {

			padding-bottom: 10px;

			> tbody tr td,
			> thead tr th {
				padding: 0 10px 0 0;
			}

			> thead tr:first-child th {
				font-weight: normal;
			}

			// Custom label input
			.simpay-multi-plan-custom-label .simpay-label-input {
				min-width: 8em;
				max-width: 15em;
				width: 100%;
			}

			// Setup fee amount input
			.simpay-multi-plan-setup-fee {
				min-width: 6.5em;

				.simpay-amount-input {
					width: 4em;
				}
			}

			// Max charges input
			.simpay-multi-plan-max-charges input.small-text {
				width: 50px;
			}

			// "Default" radio buttons
			.simpay-field-radios ul li {
				text-align: center;
			}

			tr.simpay-multi-sub {

				.chosen-container-single {
					width: 280px !important;
				}
			}
		}
	} // end .simpay-panel

	@media screen and (max-width: 782px) {

		.button.add-field {
			margin-top: 4px;
			margin-bottom: 0;
		}
	}

	// Custom fields metaboxes wrapper
	.simpay-metaboxes-wrapper {

		.simpay-metaboxes {

			&:not(.is-empty) {
				border: 1px solid #ccd0d4;
				box-shadow: 0 1px 1px rgba(0, 0, 0, 0.04);
				border-radius: 4px;
			}
		}

		.simpay-handlediv {
			display: none;
			float: right;
			width: 36px;
			height: 36px;
			margin: 0;
			padding: 0;
			border: 0;
			background: none;
			cursor: pointer;
			display: block;
		}

		.postbox.closed .simpay-handlediv .toggle-indicator:before {
			content: "\f140";
		}

		.postbox .simpay-handlediv {

			&:focus {
				outline: 0;

				.toggle-indicator:before {
					box-shadow: 0 0 0 1px #5b9dd9, 0 0 2px 1px rgba(30, 140, 190, 0.8);
				}
			}

			.toggle-indicator:before {
				margin-top: 4px;
				width: 20px;
				border-radius: 50%;
				text-indent: -1px;
			}
		}

		.simpay-metabox {
			background: #fff;
			border: 1px solid #ccd0d4;
			margin: 0 -1px -1px;

			.hndle {
				border: 0;
			}

			select {
				font-weight: 400;
			}

			&:first-of-type {
				margin-top: -1px;
				border-top-left-radius: 4px;
				border-top-right-radius: 4px;
			}

			&:last-of-type {
				margin-bottom: -1px;
				border-bottom-left-radius: 4px;
				border-bottom-right-radius: 4px;

				.simpay-metabox-content {
					border-bottom-left-radius: 4px;
					border-bottom-right-radius: 4px;
				}
			}

			h2 {
				cursor: pointer;
				display: flex;
				align-items: center;
				padding: 10px 0 10px 12px;

				.simpay-field-type {
					font-size: 90%;
					color: gray;
					font-weight: normal;
					text-decoration: none;
					margin-left: 10px;

					@media screen and (max-width: 782px) {
						display: none;
					}
				}

				.dashicons-handle {
					cursor: move;
				}

				strong {
					font-size: 95%;
					margin-left: 8px;
					display: flex;
					align-items: center;
					flex-grow: 1;
				}

				svg {
					border-radius: 3px;
				}

				select {
					font-family: sans-serif;
					max-width: 20%;
					margin: 0.25em 0.25em 0.25em 0;
				}

				&.fixed {
					cursor: pointer !important;
				}

				.dashicons-menu {
					cursor: move;
				}
			}

			.simpay-metabox-content-actions {
				padding: 9px 18px;
				justify-content: space-between;
				display: flex;
				align-items: center;
			}

			.simpay-metabox-content-actions__field-id {
				display: flex;
				align-items: center;

				input {
					margin: 0 2px 0 5px;
					width: 50px;
				}

				a {
					text-decoration: none;
				}
			}

			table {
				border-spacing: 0;
				width: 100%;

				&.simpay-inner-table {
					border: none;
					padding: 0 1em;
				}

				tr td {
					border-bottom-color: #ccd0d4;
				}
			}

			.simpay-remove-plan {
				color: #a00;
			}
		} // end .simpay-metabox

		.simpay-custom-field-payment-button {

			.dashicons-menu {
				visibility: hidden;
			}
		}
	} // end .simpay-metaboxes-wrapper

	.simpay-multi-subs-wrap {

		table {
			// CSS standardize selector less qualified
			td.simpay-multi-sub-default {
				text-align: center;
			}
		}

		.simpay-user-subs {
			margin-top: 18px;

			&.is-empty {
				margin-top: 0;
			}
		}
	}

	#_plan_interval {
		vertical-align: middle;
	}

	#_amount[disabled="disabled"] {
		background: #eee;
	}
}

.simpay-field-icons {
	margin-left: auto;
	display: flex;
	align-items: center;

	> * {
		margin-left: 5px;
	}

	.simpay-custom-field-card & {
		span,
		svg {
			width: 16px;
			height: 16px;
		}
	}
}

// Styles that apply to both global & form/CPT settings pages
#simpay-global-settings,
#simpay-form-settings {

	// Remove icon using dashicon "dismiss"
	// Subscription plan remove
	// Checkout overlay image remove
	.simpay-remove-icon {
		display: inline-block;
		padding: 5px;
		text-decoration: none;

		&::before {
			background: none;
			color: #b4b9be;
			content: "\f153";
			display: block;
			font: normal 16px/20px dashicons;
			height: 20px;
			speak: none;
			text-align: center;
			width: 20px;
			-webkit-font-smoothing: antialiased;
			-moz-osx-font-smoothing: grayscale;
		}

		&:hover::before {
			color: #c00;
		}
	}
}

/**
 * Form settings.
 */

#simpay-form-settings {

	.button-link.simpay-remove-field-link {
		color: #a00;

		&:hover {
			color: #dc3232;
		}
	}
}

.simpay-payment-method-option {
	margin: 0 0 1rem;
}

.simpay-payment-method-close {
	margin: 16px -16px -16px;
	padding: 16px;
	border-top: 1px solid #dfdfdf;
	background: #fcfcfc;
	display: flex;
	align-items: center;
	justify-content: space-between;
}

tr[class^="simpay-settings-email_"][class$="_test"] {

	td {
		padding-bottom: 40px;
	}
}

.simpay-send-test-email {

	> * {
		vertical-align: middle;
	}

	&__label {
		display: block;
		font-weight: 500;
		margin-bottom: 4px;
	}

	.notice {
		margin-top: 10px;
	}
}

.simpay-send-payment-confirmation {

	.spinner {
		margin: 0;
		float: none;
	}

	&__result {
		display: flex;
		margin: 6px 0 18px;

		&:last-child {
			margin-bottom: 8px;
		}

		input[type="radio"] {
			margin-top: -2px;
			margin-right: 8px;
		}

		span {
			margin-top: -3px;
		}
	}
}

.simpay-price-locked {
	position: relative;

	&:after {
		position: absolute;
		top: 0;
		right: 0;
		bottom: 0;
		left: 0;
		background: #f5f5f5;
		opacity: 0.55;
		content: '';
		z-index: 3;
	}
}

.simpay-tax-rates {

	th,
	td {
		padding: 8px 10px;
	}

}

.simpay-tax-rate-actions {
	color: #ddd;
	font-size: 13px;
	padding: 2px 0 0;
}

// Email settings.
.simpay-settings {

	// Hide subsection tabs.
	.simpay-settings-subsections__subsection {

		&.simpay-settings-subsection-payment-confirmation,
		&.simpay-settings-subsection-payment-notification,
		&.simpay-settings-subsection-upcoming-invoice,
		&.simpay-settings-subsection-invoice-confirmation {
			display: none;
		}
	}

	.simpay-settings-subsection-emails-tools {
		margin-left: auto;
	}
}

// Payment Page
.payment-page-background-color-selector {
	display: flex;
	align-items: center;
	flex-wrap: wrap;
	position: relative;
}

.simpay-payment-page-background-color {
	margin: 0 8px 8px 0;
}

.simpay-payment-page-background-color label {
	width: 88px;
	height: 50px;
	border-radius: 4px;
	display: flex;
	justify-content: center;
	align-items: center;
	border: 2px solid transparent;
	position: relative;
	box-sizing: border-box;
}

.simpay-payment-page-background-color input {
	position: absolute;
	top: 0;
	left: 0;
	z-index: -1;
}

.simpay-payment-page-background-color input:checked + label,
.simpay-payment-page-background-color .wp-picker-container .wp-color-result.button.is-selected {
	box-shadow: inset 0 0 0 2px white;
}

.simpay-payment-page-background-color input:checked + label:after,
.simpay-payment-page-background-color .wp-picker-container .wp-color-result.button.is-selected:after {
	color: #fff;
	font-size: 20px;
	font-weight: bold;
	content: 'âœ“';
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate3d(-50%, -50%, 0);
}

.simpay-payment-page-background-color .wp-picker-container .wp-color-result.button {
	width: 80px;
	height: 50px;
	border-radius: 4px;
	border: 2px solid transparent;
	box-sizing: border-box;
	margin: 0;
	position: relative;
}

.simpay-payment-page-background-color .wp-picker-container .wp-color-result.button:after {
	content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 512 512'%3E%3C!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--%3E%3Cpath d='M482.8 29.23c38.9 38.98 38.9 102.17 0 141.17L381.2 271.9l9.4 9.5c12.5 12.5 12.5 32.7 0 45.2s-32.7 12.5-45.2 0l-160-160c-12.5-12.5-12.5-32.7 0-45.2s32.7-12.5 45.2 0l9.5 9.4L341.6 29.23c39-38.974 102.2-38.974 141.2 0zM55.43 323.3 176.1 202.6l45.3 45.3-120.7 120.7c-3.01 3-4.7 7-4.7 11.3V416h36.1c4.3 0 8.3-1.7 11.3-4.7l120.7-120.7 45.3 45.3-120.7 120.7c-15 15-35.4 23.4-56.6 23.4H89.69l-39.94 26.6c-12.69 8.5-29.59 6.8-40.377-4-10.786-10.8-12.459-27.7-3.998-40.4L32 422.3v-42.4c0-21.2 8.43-41.6 23.43-56.6z' fill='%23fff' /%3E%3C/svg%3E");
	position: absolute;
	top: 58%;
	left: 50%;
	transform: translate3d(-50%, -50%, 0);
}

.simpay-payment-page-background-color .wp-picker-container .wp-color-result.button:hover,
.simpay-payment-page-background-color .wp-picker-container .wp-color-result.button:focus {
	color: #fff;
	border: 2px solid transparent;
	box-shadow: none;
}

.simpay-payment-page-background-color .wp-picker-container .wp-color-result.button:hover:after,
.simpay-payment-page-background-color .wp-picker-container .wp-color-result.button:focus:after {
	color: #fff;
	border: 0;
}

.simpay-payment-page-background-color .wp-picker-holder {
	position: absolute;
	z-index: 10;
}

.simpay-payment-page-background-color .wp-picker-container .wp-picker-clear,
.simpay-payment-page-background-color .wp-picker-container .wp-color-result-text {
	display: none;
}

.simpay-payment-page-background-color .wp-picker-open + .wp-picker-input-wrap {
	display: none;
}

.simpay-settings-fraud_email_verification {

	th,
	td {
		padding-top: 50px !important;
		border-top: 1px solid #ccc;
	}
}

#simpay-settings-general-recaptcha-fraud_email_verification_threshold,
#simpay-settings-general-recaptcha-fraud_email_verification_timeframe {
	width: 75px;
}
